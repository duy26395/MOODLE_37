define(["jquery","core/ajax","core/templates"],function(e,t,n){return{processResults:function(t,n){var o=[];return e.each(n,function(e,t){o.push({value:t.id,label:t._label})}),o},transport:function(o,r,a,i){var c,l={},u="",s=e("#treeview-orgstructure-course").data("kendoTreeView"),d=s.select(),f=e("#id_courseofjobtitle").parent().find('[id^="form_autocomplete_selection"] .badge');e.each(f,function(t,n){var o=t==f.length-1,r=e(this).attr("data-value");o?u+=r:u=u+r+","}),"undefined"!=typeof courseid&&""!==e("#id_searchwithin").val()?l.courseid=courseid:(d.length>0&&(c=s.dataItem(d)),c&&(l.orgstructureid=c.id),l.orgjobtitleid=u),console.log(l),t.call([{methodname:"local_newsvnr_loadingorgposition",args:l}])[0].then(function(t){var o=[];return e.each(t,function(e,t){o.push(n.render("local_newsvnr/form-orgposition-selector",t))}),e.when.apply(e.when,o).then(function(){var n=arguments,o=0;e.each(t,function(e,t){t._label=n[o++]}),a(t)})}).fail(i)}}});